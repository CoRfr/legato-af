<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Legato: Modem Data Control API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <img alt="Logo" src="legatoLogo.png"/>
    <div id="projectbrief">Wireless M2M smooth and connected</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('c_mdc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Modem Data Control API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="mdc__interface_8h.html">Click here for the API Reference documentation.</a></p>
<hr/>
<p><a class="el" href="c_mdc.html#le_mdc_profile">Data Profiles</a> <br/>
 <a class="el" href="c_mdc.html#le_mdc_session">Data Sessions</a> <br/>
 <a class="el" href="c_mdc.html#le_mdc_dataStatistics">Data Statistics</a> <br/>
 <a class="el" href="c_mdc.html#le_mdc_configdb">Data configuration tree</a> <br/>
</p>
<p>A data session is useful for applications that need to send or receive data over a network where SMS messages are insufficient. To start a data session, a data profile must be configured as specified by the target network.</p>
<p>The Modem Data Control (mdc) API is used to manage data profiles and data sessions.</p>
<h1><a class="anchor" id="le_mdc_profile"></a>
Data Profiles</h1>
<p>If a pre-defined data profile has been configured then this profile can be loaded using <a class="el" href="mdc__interface_8h.html#aaf1a5096e60a30e32de138665dc03d2e">le_mdc_LoadProfile</a>. <a class="el" href="mdc__interface_8h.html#aaf1a5096e60a30e32de138665dc03d2e">le_mdc_LoadProfile</a> will try to read the data profile configuration from the configuration tree. If one data profile is currently in use and one of its parameters changes in the configuration tree, the new value will be loaded automatically. The maximum number of data profiles supported is modem dependent.</p>
<p>The following data profile parameters can be retrieved:</p>
<ul>
<li>Profile name using <a class="el" href="mdc__interface_8h.html#abd8824a18e0c0307dee65bbc383cb8c0">le_mdc_GetProfileName</a>.</li>
<li>IP Preference (i.e. PDP type) can be checked with <code><a class="el" href="le__mdc_8h.html#a90f9b98adc367436614e29f934ce1c3b">le_mdc_IsIPV4()</a></code> or <code><a class="el" href="le__mdc_8h.html#a1db6fc9bdcea2f679814ad69965fe33c">le_mdc_IsIPV6()</a></code> </li>
</ul>
<h1><a class="anchor" id="le_mdc_session"></a>
Data Sessions</h1>
<p>A data session can be started using <a class="el" href="mdc__interface_8h.html#a4611f8c0a26a9c2b8c6d8bb6ce39ce7d">le_mdc_StartSession</a>. To start a data session, a data profile must be created and written to the modem, or an existing data profile can be used. A data session can be stopped using <a class="el" href="mdc__interface_8h.html#a3306a2efe863079f6bde881db39476bc">le_mdc_StopSession</a>. The number of simultaneous data sessions supported is dependent on the modem, but cannot be more than the maximum number of supported profiles.</p>
<p>The current state of a data session can be queried using <a class="el" href="mdc__interface_8h.html#a0e99ea550357ec6f712bfb8a9913dc1e">le_mdc_GetSessionState</a>. An application can also a register handler to be notified when the session state changes. The handler can be managed using <a class="el" href="mdc__interface_8h.html#a68c83cea1c67af1d179df23d7028ca54">le_mdc_AddSessionStateHandler</a> and <a class="el" href="mdc__interface_8h.html#a3b89962f4383f42a357f5a5fcc14fdff">le_mdc_RemoveSessionStateHandler</a>.</p>
<p>Once a data session starts, a Linux network interface is created. It's the application's responsibility to configure the network interface, usually through a DHCP client. Query the interface name using <a class="el" href="mdc__interface_8h.html#a9d2dc2cf724134737dd655ae7b4bdfd7">le_mdc_GetInterfaceName</a>. The IP address for the current data session can be retreived by <a class="el" href="mdc__interface_8h.html#a49bfa40e6e332d35e1f2373981101c7e">le_mdc_GetIPAddress</a>. The Gateway and DNS addresses can be retrieved using <a class="el" href="mdc__interface_8h.html#abb505ff8417b50e6562a10e343328f5b">le_mdc_GetGatewayAddress</a> and <a class="el" href="mdc__interface_8h.html#a63ba3cb5391701764357a8b737b50019">le_mdc_GetDNSAddresses</a>. The Access Point Name can be retrieved by <a class="el" href="mdc__interface_8h.html#ab2ed8eece45a47ce2fe23a84d87cfa9c">le_mdc_GetAccessPointName</a>. The Data bearer Technology can be retreived by <a class="el" href="mdc__interface_8h.html#a7474f8ff84fbab5cde4d49277e259155">le_mdc_GetDataBearerTechnology</a>.</p>
<h1><a class="anchor" id="le_mdc_dataStatistics"></a>
Data Statistics</h1>
<p>Data bytes received/transmitted can be access through <a class="el" href="mdc__interface_8h.html#aaad833c105f7d0ae77f18195d6739080">le_mdc_GetBytesCounters</a>. These values correspond to the number of bytes received/transmitted since the last software reset or the last <a class="el" href="mdc__interface_8h.html#a63636b2779d2ee6a6520ebfb2d26666c">le_mdc_ResetBytesCounter</a> called. Making these value persistent after a software reboot is the client responsibility.</p>
<h1><a class="anchor" id="le_mdc_configdb"></a>
Data configuration tree</h1>
<p>The configuration database path for the Modem Data Control is: </p>
<pre class="fragment"> /
     modemServices/
         modemDataConnection/
             &lt;ProfileName_1&gt;/
                 accessPointName&lt;string&gt; == &lt;ADDR&gt;
                 packetDataProtocol&lt;string&gt; == &lt;PDP_TYPE&gt;
                 authentication/
                     pap/
                         enable&lt;bool&gt; == &lt;true/false&gt;
                         userName&lt;string&gt; == &lt;USERNAME&gt;
                         password&lt;string&gt; == &lt;PWD&gt;
                     chap/
                         enable&lt;bool&gt; == &lt;true/false&gt;
                         userName&lt;string&gt; == &lt;USERNAME&gt;
                         password&lt;string&gt; == &lt;PWD&gt;

             &lt;ProfileName_2&gt;/
                 accessPointName&lt;string&gt; == &lt;ADDR&gt;
             ...
             &lt;ProfileName_5&gt;/
                 accessPointName&lt;string&gt; == &lt;ADDR&gt;
</pre><ul>
<li>'ProfileName_*' is the name that <a class="el" href="mdc__interface_8h.html#aaf1a5096e60a30e32de138665dc03d2e">le_mdc_LoadProfile</a> can load.</li>
<li>'ADDR' is an address like xxx.xxx.xxx.xxx .</li>
<li>'USERNAME' is the name used for authentication</li>
<li>'PWD' is the password used for authentication</li>
<li>'PDP_TYPE' is the protocol:<ul>
<li>IPV4</li>
<li>IPV6</li>
</ul>
</li>
</ul>
<p>If //modemServices/modemDataConnection/&lt;ProfileName&gt;/packetDataProtocol is omitted, IPV4 will be the default protocol. </p>
<dl class="section note"><dt>Note</dt><dd>PAP and CHAP authentication are not usable at the same time, the first authentication enabled found in the configDB will be used.</dd></dl>
<hr/>
<p>Copyright (C) Sierra Wireless, Inc 2014. Use of this work is subject to license. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="http://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless 2014
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.4
        </div>
    </div>
</body>
</html>
